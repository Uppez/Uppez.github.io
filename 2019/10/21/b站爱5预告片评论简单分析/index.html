<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  <title>b站爱5预告片评论简单分析 | 教书的先生</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="1.数据爬取借用cid">
<meta name="keywords" content="爱5分析">
<meta property="og:type" content="article">
<meta property="og:title" content="b站爱5预告片评论简单分析">
<meta property="og:url" content="http://yoursite.com/2019/10/21/b站爱5预告片评论简单分析/index.html">
<meta property="og:site_name" content="教书的先生">
<meta property="og:description" content="1.数据爬取借用cid">
<meta property="og:locale" content="ch">
<meta property="og:updated_time" content="2019-10-21T12:10:28.584Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="b站爱5预告片评论简单分析">
<meta name="twitter:description" content="1.数据爬取借用cid">
  
  <link rel="stylesheet" href="//cdn.bootcss.com/highlight.js/9.2.0/styles/github.min.css">
  <script src="//cdn.bootcss.com/highlight.js/9.2.0/highlight.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', (event) => {
      document.querySelectorAll('pre code').forEach((block) => {
        hljs.highlightBlock(block);
      });
    });
  </script>
  <link rel="stylesheet" href="/css/index.css">
</head>
</html>
<body style="


  background-color: #eff0f6

">
  <div id="container">
    <nav id="nav">
  <header class="header">
    <a href="/" class="title">Clover Tuan</a>
  </header>
  <div class="ctnWrap">
    <div class="icons">
      
        
          
            <a href="https://dribbble.com/clovertuan" target="_blank" class="nav-icn iconfont icon-dribbble"></a>
          
        
          
            <a href="https://www.behance.net/clovertuan" target="_blank" class="nav-icn iconfont icon-behance"></a>
          
        
          
            <a href="http://clovertuan.lofter.com/" target="_blank" class="nav-icn iconfont icon-lofter"></a>
          
        
          
            <a href="https://www.instagram.com/clovertuan/" target="_blank" class="nav-icn iconfont icon-instagram"></a>
          
        
          
            <a href="https://github.com/cloverTuan" target="_blank" class="nav-icn iconfont icon-github"></a>
          
        
      
    </div>
    <div class="menu">
      
        
            <a href="/" class="nav-menu ">HOME</a>
          
        
            <a href="/archives" class="nav-menu ">ARCHIVE</a>
          
        
            <a href="/about" class="nav-menu ">ABOUT</a>
          
        
      
    </div>
  </div>
</nav>
    <div id="main"><section class="article">
  <h2 class="title">b站爱5预告片评论简单分析</h2>
  <p class="sub">Oct 21, 2019</p>
  <article class="content">
    <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd </span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url = <span class="string">"http://comment.bilibili.com/123519261.xml"</span></span><br><span class="line">html = requests.get(url)</span><br><span class="line">html.encoding = <span class="string">"utf8"</span></span><br><span class="line"></span><br><span class="line">soup = BeautifulSoup(html.text, <span class="string">"lxml"</span>)</span><br><span class="line">results = soup.find_all(<span class="string">"d"</span>)</span><br><span class="line"></span><br><span class="line">comments = [comment.text <span class="keyword">for</span> comment <span class="keyword">in</span> results]</span><br><span class="line">comments_dict = &#123;<span class="string">"comments"</span>: comments&#125;</span><br><span class="line"></span><br><span class="line">df = pd.DataFrame(comments_dict)</span><br><span class="line">df.to_csv(<span class="string">"bilibili_data.csv"</span>, encoding=<span class="string">"utf-8-sig"</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">"爬取完成！"</span>)</span><br></pre></td></tr></table></figure>

<h2 id="2-数据分析"><a href="#2-数据分析" class="headerlink" title="2.数据分析"></a>2.数据分析</h2><h3 id="2-1数据查看"><a href="#2-1数据查看" class="headerlink" title="2.1数据查看"></a>2.1数据查看</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">data = pd.read_csv(<span class="string">"bilibili_data.csv"</span>)</span><br><span class="line"><span class="keyword">del</span>(data[<span class="string">"Unnamed: 0"</span>])</span><br><span class="line">data.head(<span class="number">5</span>)</span><br></pre></td></tr></table></figure>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}</code></pre><p></style><p></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>啊啊啊啊啊啊啊</td>
    </tr>
    <tr>
      <td>1</td>
      <td>高三</td>
    </tr>
    <tr>
      <td>2</td>
      <td>高二加1</td>
    </tr>
    <tr>
      <td>3</td>
      <td>可惜了关谷，，悠悠</td>
    </tr>
    <tr>
      <td>4</td>
      <td>没多少戏应该是请不起了</td>
    </tr>
  </tbody>
</table>
</div>



<h3 id="2-2怀念度（年龄）分析"><a href="#2-2怀念度（年龄）分析" class="headerlink" title="2.2怀念度（年龄）分析"></a>2.2怀念度（年龄）分析</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">dayicount = <span class="number">0</span></span><br><span class="line">daercount = <span class="number">0</span></span><br><span class="line">dasancount = <span class="number">0</span></span><br><span class="line">gaoyicount = <span class="number">0</span></span><br><span class="line">gaoercount = <span class="number">0</span></span><br><span class="line">gaosancount = <span class="number">0</span></span><br><span class="line">xiaoxuecount = <span class="number">0</span></span><br><span class="line">chuzhongcount = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(data)):</span><br><span class="line">    <span class="keyword">if</span> <span class="string">"大一"</span> <span class="keyword">in</span> data[<span class="string">"comments"</span>][i]:</span><br><span class="line">        dayicount += <span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> <span class="string">"大二"</span> <span class="keyword">in</span> data[<span class="string">"comments"</span>][i]:</span><br><span class="line">        daercount += <span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> <span class="string">"大三"</span> <span class="keyword">in</span> data[<span class="string">"comments"</span>][i]:</span><br><span class="line">        dasancount += <span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> <span class="string">"高一"</span> <span class="keyword">in</span> data[<span class="string">"comments"</span>][i]:</span><br><span class="line">        gaoyicount += <span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> <span class="string">"高二"</span> <span class="keyword">in</span> data[<span class="string">"comments"</span>][i]:</span><br><span class="line">        gaoercount += <span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> <span class="string">"高三"</span> <span class="keyword">in</span> data[<span class="string">"comments"</span>][i]:</span><br><span class="line">        gaosancount += <span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> <span class="string">"小学"</span> <span class="keyword">in</span> data[<span class="string">"comments"</span>][i]:</span><br><span class="line">        xiaoxuecount += <span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> <span class="string">"初中"</span> <span class="keyword">in</span> data[<span class="string">"comments"</span>][i]:</span><br><span class="line">        chuzhongcount += <span class="number">1</span></span><br><span class="line">print(<span class="string">"大一："</span>,dayicount)</span><br><span class="line">print(<span class="string">"大二："</span>,daercount)</span><br><span class="line">print(<span class="string">"大三："</span>,dasancount)</span><br><span class="line">print(<span class="string">"高一："</span>,gaoyicount)</span><br><span class="line">print(<span class="string">"高二："</span>,gaoercount)</span><br><span class="line">print(<span class="string">"高三："</span>,gaosancount)</span><br><span class="line">print(<span class="string">"小学："</span>,xiaoxuecount)</span><br><span class="line">print(<span class="string">"初中："</span>,chuzhongcount)</span><br></pre></td></tr></table></figure>

<pre><code>大一： 60
大二： 34
大三： 19
高一： 72
高二： 59
高三： 70
小学： 5
初中： 2</code></pre><p>1000条弹幕就有这么多怀念青春的人  哈哈哈</p>
<h2 id="3-源文件下载"><a href="#3-源文件下载" class="headerlink" title="3.源文件下载"></a>3.源文件下载</h2><p><a href="http://pan.sqdxwz.com/?/python/爱5分析/" target="_blank" rel="noopener">oneindex下载</a></p>
  </article>
  <footer class="f-cf">
    
      <a href="/2019/10/21/当你的贪吃蛇吃满屏幕后/" class="link f-fl">⟵当你的贪吃蛇吃满屏幕后...</a>
    
    
      <a href="/2019/10/21/排序动画演示/" class="link f-fr">排序动画演示⟶</a>
    
  </footer>
</section></div>
    <footer id="footer" class="f-cf">
  d.guangying@foxmail.com
  
    
      
        · <a href="https://dribbble.com/clovertuan" target="_blank" class="nav-icn">Dribbble</a>
      
    
      
        · <a href="https://www.behance.net/clovertuan" target="_blank" class="nav-icn">Behance</a>
      
    
      
        · <a href="http://clovertuan.lofter.com/" target="_blank" class="nav-icn">Lofter</a>
      
    
      
        · <a href="https://www.instagram.com/clovertuan/" target="_blank" class="nav-icn">Instagram</a>
      
    
      
        · <a href="https://github.com/cloverTuan" target="_blank" class="nav-icn">GitHub</a>
      
    
  
  <span class="copyright">All rights reserved @Clover Tuan</span>
</footer>
  </div>
</body>
</html>